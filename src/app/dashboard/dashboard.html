<main class="container">
  @if (userData?.login) {
    <header class="user-profile">
      <img [src]="userData.avatar_url" alt="Avatar">
      <div class="info">
        <h1>{{ userData.name || userData.login }}</h1>
        <p>{{ userData.bio }}</p>
      </div>
    </header>

    <div class="stats-grid">
      <app-star-count [repos]="repos()"></app-star-count>
      <app-fork-count [repos]="repos()"></app-fork-count>
      <app-language-highlights [repos]="repos()"></app-language-highlights>
      <app-repo-count [count]="userData?.public_repos || 0"></app-repo-count>
    </div>

    <section class="repos-section">
      <h2>Repositories</h2>

      <div class="repos-grid">
        @for (repo of repos(); track repo.name) {
          <div class="repo-card">
            <div class="repo-header">
              <a [href]="repo.html_url" target="_blank" class="repo-name">
                {{ repo.name }}
              </a>
              <span class="visibility">{{ repo.visibility }}</span>
            </div>

            <p class="description">
              {{ repo.description || 'No description provided.' }}
            </p>

            <div class="repo-footer">
              @if (repo.language) {
                <span class="repo-lang">
                  <span class="dot" [style.background-color]="getLanguageColor(repo.language)"></span>
                  {{ repo.language }}
                </span>
              }
              <span class="repo-stat">‚≠ê {{ repo.stargazers_count }}</span>
              <span class="repo-stat">üç¥ {{ repo.forks_count }}</span>
            </div>
          </div>
        } @empty {
          <p class="empty-msg">No repositories found for this user.</p>
        }
      </div>
    </section>

  } @else {
    <div class="loading-state">
      <p>Loading data for {{ username() || 'user' }}...</p>
    </div>
  }
</main>
